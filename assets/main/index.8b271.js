window.__require=function e(t,o,n){function i(s,r){if(!o[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){return i(t[s][1][e]||e)},d,d.exports,e,t,o,n)}return o[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({AudioManager:[function(e,t){"use strict";cc._RF.push(t,"ff975y77FtJAqq/a0uCMh1D","AudioManager");var o=cc.Class({extends:cc.Component,properties:{swapAudio:{default:null,type:cc.AudioClip},hookedAudio:{default:null,type:cc.AudioClip},gameOverAudio:{default:null,type:cc.AudioClip},clickAudio:{default:null,type:cc.AudioClip},bgmAudio:{default:null,type:cc.AudioClip}},statics:{instance:null},onLoad:function(){o.instance=this,window.isBgmPlay=window.isBgmPlay||!1},start:function(){isBgmPlay||(cc.audioEngine.playMusic(this.bgmAudio,!0),isBgmPlay=!0)}});cc._RF.pop()},{}],BackgroundScroller:[function(e,t){"use strict";cc._RF.push(t,"c9d16rn82dKkIJFXhdtbp1+","BackgroundScroller");var o=e("GameManager");cc.Class({extends:cc.Component,properties:{speed:0,resetY:0},update:function(e){if(!o.instance.isPlayerHooked&&!o.instance.isGameOver){var t=this.node.y;(t+=this.speed*e)<=this.resetY&&(t-=this.resetY),this.node.y=t}}}),cc._RF.pop()},{GameManager:"GameManager"}],BoundaryController:[function(e,t){"use strict";cc._RF.push(t,"2257cLAaKJFFI+WdQ5WdlMv","BoundaryController");var o=e("GameManager");cc.Class({extends:cc.Component,properties:{},onCollisionEnter:function(e){"Hook"==e.node.group?(o.instance.removeSpawnedHook(o.instance.spawnedHook.indexOf(e.node)),o.instance.poolHook.put(e.node)):"Player"!=e.node.group||o.instance.isPlayerHooked||(o.instance.isGameOver=!0)}}),cc._RF.pop()},{GameManager:"GameManager"}],BoundaryMovement:[function(e,t){"use strict";cc._RF.push(t,"35ec7V/7WxPRaBBPNDmijJf","BoundaryMovement"),cc.Class({extends:cc.Component,properties:{targetFollow:{default:null,type:cc.Node},canvas:{default:null,type:cc.Node}},onLoad:function(){},start:function(){},update:function(){this.followTarget()},followTarget:function(){var e=this.getPositionRelative(this.targetFollow,this.canvas);this.node.position.y<=e.y&&(this.node.position=cc.v2(this.node.position.x,e.y))},getPositionRelative:function(e,t){return e.convertToWorldSpaceAR(cc.v2(0,0)).sub(t.convertToWorldSpaceAR(cc.v2(0,0)))}}),cc._RF.pop()},{}],CameraMovement:[function(e,t){"use strict";cc._RF.push(t,"46d3coH2dRO6qLZFJqAda4N","CameraMovement");var o=e("GameManager");cc.Class({extends:cc.Component,properties:{offSetYfollowPosition:0,targetFollow:{default:null,type:cc.Node},canvas:{default:null,type:cc.Node}},onLoad:function(){},start:function(){},update:function(){this.followTarget()},followTarget:function(){o.instance.isGameOver||(this.node.position=this.getPositionRelative(this.targetFollow,this.canvas))},getPositionRelative:function(e,t){return e.convertToWorldSpaceAR(cc.v2(0,0)).sub(t.convertToWorldSpaceAR(cc.v2(0,0)))}}),cc._RF.pop()},{GameManager:"GameManager"}],GameManager:[function(e,t){"use strict";cc._RF.push(t,"74c0arO1oxH6Z9B6a0yzCTu","GameManager");var o=e("AudioManager"),n=cc.Class({extends:cc.Component,properties:{defaultSpeedHook:100,minDistancePlayerToStartHooked:100,canvas:{default:null,type:cc.Node},player:{default:null,type:cc.Node},playerParent:{default:null,type:cc.Node},hookSpawner:{default:null,type:cc.Node},radiusHookPlayer:{default:null,type:cc.Node},linePlayer:{default:null,type:cc.Node}},statics:{instance:null},onLoad:function(){this.score=0,this.hookSpawnerScript=this.hookSpawner.getComponent("HookSpawner"),this.isGameStart=!1,this.isGameOver=!1,this.speedHook=0,this.spawnedHook=[],this.playerHookFromRight=!0,cc.director.getCollisionManager().enabled=!0,this.speedHook=this.defaultSpeedHook,this.currentDistanceHook=0,this.currentIndexHook=-1,this.currentHookNode=null,n.instance=this,this.poolHook=new cc.NodePool,this.isPlayerHooked=!1},onStart:function(){},StartGameplay:function(){cc.audioEngine.play(o.instance.clickAudio),this.hookSpawnerScript.currentDistance+=this.player.position.y,this.isGameStart=!0},RestartGameplay:function(){cc.audioEngine.play(o.instance.clickAudio),this.score=0,cc.director.loadScene("MainScene"),cc.director.resume()},addSpawnedHook:function(e){this.spawnedHook.push(e)},removeSpawnedHook:function(e){this.spawnedHook.splice(e,1)},checkDistance:function(e,t){var o=Math.pow(e.x-t.x,2),n=Math.pow(e.y-t.y,2);return Math.sqrt(o+n)},indexOfSmallestValue:function(e){return e.indexOf(Math.min.apply(Math,e))},isGetNearestIndexHook:function(){var e=[];this.currentIndexHook=-1;for(var t=0;t<this.spawnedHook.length;t++)e.push(this.checkDistance(this.player.position,this.spawnedHook[t].position));return this.currentIndexHook=this.indexOfSmallestValue(e),this.currentDistanceHook=e[this.currentIndexHook],e[this.currentIndexHook]<=this.minDistancePlayerToStartHooked?this.currentIndexHook:-1},findNearestHook:function(){this.isPlayerHooked=!0;var e=this.spawnedHook[this.currentIndexHook].getComponent("HookController");this.currentHookNode=this.spawnedHook[this.currentIndexHook],this.radiusHookPlayer.parent=e.rotator,this.player.position.x>this.spawnedHook[this.currentIndexHook].position.x?(this.linePlayer.anchorX=1,this.playerHookFromRight=!0,this.setPlayerAngle(this.player,this.spawnedHook[this.currentIndexHook],!0),e.isRotateRight=!0,this.SetNodeParent(this.player,e.rotator)):this.player.position.x<this.spawnedHook[this.currentIndexHook].position.x&&(this.linePlayer.anchorX=0,this.playerHookFromRight=!1,this.setPlayerAngle(this.player,this.spawnedHook[this.currentIndexHook],!1),e.isRotateRight=!1,this.SetNodeParent(this.player,e.rotator)),this.linePlayer.parent=this.player,this.setPlayerAngle(this.linePlayer,this.spawnedHook[this.currentIndexHook],!0),this.linePlayer.angle=0,this.linePlayer.position=cc.v2(0,0),this.radiusHookPlayer.position=cc.v2(0,0),this.linePlayer.position=cc.v2(0,0),this.radiusHookPlayer.width=2*this.currentDistanceHook,this.radiusHookPlayer.height=2*this.currentDistanceHook,this.linePlayer.width=this.currentDistanceHook,this.linePlayer.height=.5,e.speedRotation+=this.currentDistanceHook/3,e.isCanRotate=!0},releaseFromHook:function(){if(this.isPlayerHooked=!1,this.radiusHookPlayer.parent=this.canvas,this.linePlayer.parent=this.canvas,this.radiusHookPlayer.width=0,this.radiusHookPlayer.height=0,this.linePlayer.width=0,this.linePlayer.height=0,this.SetNodeParent(this.player,this.playerParent),null!=this.currentHookNode){this.player.position.x<this.currentHookNode.position.x&&this.playerHookFromRight||this.player.position.x>this.currentHookNode.position.x&&this.playerHookFromRight?this.setPlayerAngle(this.player,this.currentHookNode,!0):(this.player.position.x<this.currentHookNode.position.x&&!this.playerHookFromRight||this.player.position.x>this.currentHookNode.position.x&&!this.playerHookFromRight)&&this.setPlayerAngle(this.player,this.currentHookNode,!1);var e=this.currentHookNode.getComponent("HookController");e.isCanRotate=!1,e.speedRotation=e.defaultSpeedRotation}this.currentHookNode=null},SetNodeParent:function(e,t){var o=e.convertToWorldSpaceAR(cc.v2(0,0)).sub(t.convertToWorldSpaceAR(cc.v2(0,0)));t.angle=0,e.parent=t,e.position=o},rad2deg:function(e){return e*(180/Math.PI)},setPlayerAngle:function(e,t,o){var n=e.position.x-t.position.x,i=e.position.y-t.position.y,a=Math.atan2(i,n),s=this.rad2deg(a);e.angle=o?s:s+180}});cc._RF.pop()},{AudioManager:"AudioManager"}],HookController:[function(e,t){"use strict";cc._RF.push(t,"0237cErpfhGmYIWlyMmOh1W","HookController");var o=e("GameManager"),n=e("AudioManager");cc.Class({extends:cc.Component,properties:{myNode:{default:null,type:cc.Node},rotator:{default:null,type:cc.Node},effectHook:{default:null,type:cc.ParticleSystem},starAnim:{default:null,type:cc.Animation},isCanRotate:!1,isRotateRight:!1,speedRotation:100,defaultSpeedRotation:100},onLoad:function(){this.starAnim.node.scaleX=.2,this.starAnim.node.scaleY=.2,this.isEffectActive=!1,this.speedRotation=this.defaultSpeedRotation},onEnable:function(){this.starAnim.node.scaleX=.2,this.starAnim.node.scaleY=.2,this.isEffectActive=!1},starAnimt:function(){},setPositionHook:function(e,t){this.node.position=cc.v2(e,t)},update:function(e){this.moveHook(e),this.isCanRotate&&(this.isEffectActive||(cc.audioEngine.play(n.instance.hookedAudio,!1),o.instance.score++,this.starAnim.play(),this.effectHook.resetSystem(),this.isEffectActive=!0),this.isRotateRight?this.rotator.angle=this.rotator.angle+=e*this.speedRotation:this.rotator.angle=this.rotator.angle-=e*this.speedRotation)},moveHook:function(e){this.node.y-=o.instance.speedHook*e}}),cc._RF.pop()},{AudioManager:"AudioManager",GameManager:"GameManager"}],HookSpawner:[function(e,t){"use strict";cc._RF.push(t,"a86b0jnPXFMCoEU/F//8+8G","HookSpawner");var o=e("GameManager");cc.Class({extends:cc.Component,properties:{minDistanceToSpawn:100,maxDistanceToSpawn:200,hookPrefab:{default:null,type:cc.Prefab},canvas:{default:null,type:cc.Node},parentSpawned:{default:null,type:cc.Node},player:{default:null,type:cc.Node}},onLoad:function(){this.currentDistance=this.getRandomValue(this.minDistanceToSpawn,this.maxDistanceToSpawn)},start:function(){this.randomXpos=0,this.minXspawnPosition=-(this.canvas.width-100)/2,this.maxXspawnPosition=(this.canvas.width-100)/2},update:function(e){o.instance.isGameStart&&this.spawnHook(e)},spawnHook:function(){if(this.player.position.y>=this.currentDistance){this.currentDistance=this.player.position.y+this.getRandomValue(this.minDistanceToSpawn,this.maxDistanceToSpawn);var e=o.instance.poolHook.get();e||(e=cc.instantiate(this.hookPrefab)),this.parentSpawned.addChild(e),this.randomXpos=this.getRandomValue(this.minXspawnPosition,this.maxXspawnPosition);var t=e.getComponent("HookController");t.setPositionHook(this.node.x+this.randomXpos,this.node.y+this.player.y),o.instance.addSpawnedHook(t.myNode)}},getRandomValue:function(e,t){return e+Math.random()*(t-e)}}),cc._RF.pop()},{GameManager:"GameManager"}],PlayerController:[function(e,t){"use strict";cc._RF.push(t,"3d9ebx1J0xGybDNVWbjAwyY","PlayerController");var o=e("GameManager"),n=e("AudioManager"),i=e("UIManager");cc.Class({extends:cc.Component,properties:{canvas:cc.Node,hitArea:cc.Node,defaultSpeedMovement:100,dieEffect:{default:null,type:cc.ParticleSystem}},onEnable:function(){i.instance.node.on("onGameOver",function(){this.getComponent("PlayerController").dieEffect.resetSystem(),this.getComponent("PlayerController").speedMovement=0},this.node)},onDisable:function(){i.instance.node.off("onGameOver",function(){this.getComponent("PlayerController").dieEffect.resetSystem(),this.getComponent("PlayerController").speedMovement=0},this.node)},onLoad:function(){this.speedMovement=this.defaultSpeedMovement,this.minXBoundary=-this.canvas.width/2,this.maxXBoundary=this.canvas.width/2,this.hitArea.on(cc.Node.EventType.TOUCH_START,function(){o.instance.isGameOver||o.instance.isGetNearestIndexHook()>=0&&(cc.audioEngine.play(n.instance.swapAudio,!1),o.instance.findNearestHook(),o.instance.speedHook=0,this.speedMovement=0)},this),this.hitArea.on(cc.Node.EventType.TOUCH_END,function(){o.instance.isGameOver||(o.instance.releaseFromHook(),o.instance.speedHook=o.instance.defaultSpeedHook,this.speedMovement=this.defaultSpeedMovement)},this)},start:function(){},onDestroy:function(){},update:function(e){this.movePlayer(e),!(this.node.x>this.maxXBoundary||this.node.x<this.minXBoundary)||o.instance.isPlayerHooked||o.instance.isGameOver||(o.instance.isGameOver=!0)},onCollisionEnter:function(e){"Hook"==e.node.group&&(o.instance.isGameOver=!0)},movePlayer:function(e){var t=-this.node.angle/360*2*Math.PI,o=Math.cos(t),n=Math.sin(t);this.node.x+=n*this.speedMovement*e,this.node.y+=o*this.speedMovement*e}}),cc._RF.pop()},{AudioManager:"AudioManager",GameManager:"GameManager",UIManager:"UIManager"}],UIManager:[function(e,t){"use strict";cc._RF.push(t,"54457fNjE5E3ZRb07XD28gn","UIManager");var o=e("AudioManager"),n=e("GameManager"),i=cc.Class({extends:cc.Component,properties:{uiStart:{default:null,type:cc.Node},uiGameOver:{default:null,type:cc.Node},uiInGame:{default:null,type:cc.Node},textScoreInGame:{default:null,type:cc.Label},textScoreGameOver:{default:null,type:cc.Label},uiStartAnimation:{default:null,type:cc.Animation},uiInGameAnimation:{default:null,type:cc.Animation},uiGameOverAnimation:{default:null,type:cc.Animation}},statics:{instance:null},onLoad:function(){i.instance=this},start:function(){this.uiStartAnimation.play("UIStartAnimation")},playExitUIStartAnimation:function(){this.uiStartAnimation.play("ExitUIStartAnimation")},playStartUIIngameAnimation:function(){this.uiInGameAnimation.play("UIIngameStartAnimation")},update:function(){n.instance.isGameStart&&this.uiStart.activeInHierarchy&&(this.uiInGame.active=!0),n.instance.isGameOver&&!this.uiGameOver.activeInHierarchy&&(cc.audioEngine.play(o.instance.gameOverAudio,!1),this.textScoreGameOver.string=""+n.instance.score,this.uiGameOver.active=!0,this.uiGameOverAnimation.play(),this.uiInGameAnimation.play("UIIngameExitAnimation"),this.node.emit("onGameOver"),n.instance.speedHook=0,n.instance.player.speedMovement=0,this.scheduleOnce(function(){cc.director.pause()},.5)),n.instance.isGameStart&&(this.textScoreInGame.string=""+n.instance.score)}});cc._RF.pop()},{AudioManager:"AudioManager",GameManager:"GameManager"}]},{},["AudioManager","BackgroundScroller","BoundaryController","BoundaryMovement","CameraMovement","GameManager","HookController","HookSpawner","PlayerController","UIManager"]);